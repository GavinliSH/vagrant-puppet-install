# -*- mode: ruby -*-
# vi: set ft=ruby :

# plugins don't seem to be auto-loaded from the bundle
require 'vagrant-puppet-install'

Vagrant.configure("2") do |config|

  config.vm.define :ubuntu do |ubuntu|
    ubuntu.puppet_install.puppet_version = '3.6.1'

    ubuntu.vm.box = "precise64"
    ubuntu.vm.box_url = "http://files.vagrantup.com/precise64.box"

    ubuntu.vm.provision :puppet do |puppet|
      puppet.manifests_path = File.expand_path('../../../support/manifests', __FILE__)
      puppet.manifest_file  = "base.pp"
    end

    ubuntu.vm.provision "shell", inline: "puppet --version"

  end

  config.vm.define :centos do |centos|
    centos.puppet_install.puppet_version = :latest
    centos.vm.box = 'centos-64-x64-vbox4210-nocm'
    centos.vm.box_url = 'http://puppet-vagrant-boxes.puppetlabs.com/centos-64-x64-vbox4210-nocm.box'

    config.vm.provision :puppet do |puppet|
      puppet.manifests_path = File.expand_path('../../../support/manifests', __FILE__)
      puppet.manifest_file  = "base.pp"
    end

    centos.vm.provision "shell", inline: "puppet --version"

  end

  config.vm.define :new_install_url do |new_install_url|
    new_install_url.puppet_install.puppet_version = :latest
    config.puppet_install.install_url = 'https://raw.githubusercontent.com/hashicorp/puppet-bootstrap/master/centos_6_x.sh'
    new_install_url.vm.box = 'centos-64-x64-vbox4210-nocm'
    new_install_url.vm.box_url = 'http://puppet-vagrant-boxes.puppetlabs.com/centos-64-x64-vbox4210-nocm.box'

    config.vm.provision :puppet do |puppet|
      puppet.manifests_path = File.expand_path('../../../support/manifests', __FILE__)
      puppet.manifest_file  = "base.pp"
    end

    new_install_url.vm.provision "shell", inline: "puppet --version"

  end

  config.vm.define :new_install_path do |new_install_path|
    new_install_path.puppet_install.puppet_version = :latest
    config.puppet_install.install_url = File.expand_path('../../support/puppet_install_script/centos_6_x.sh')
    new_install_path.vm.box = 'centos-64-x64-vbox4210-nocm'
    new_install_path.vm.box_url = 'http://puppet-vagrant-boxes.puppetlabs.com/centos-64-x64-vbox4210-nocm.box'

    config.vm.provision :puppet do |puppet|
      puppet.manifests_path = File.expand_path('../../../support/manifests', __FILE__)
      puppet.manifest_file  = "base.pp"
    end

    new_install_path.vm.provision "shell", inline: "puppet --version"

  end

end